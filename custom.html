<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Live Editable HTML Viewer</title>
  <style>
    body { font-family: sans-serif; margin: 0; padding: 0; }
    #editor { width: 100%; height: 100vh; border: none; outline: none; }
    #toolbar {
      position: fixed;
      top: 0; left: 0; right: 0;
      background: #111; color: white; padding: 10px;
      z-index: 999;
    }
    #toolbar button {
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <div id="toolbar">
    <button onclick="makeEditable()">Enable Editing</button>
    <button onclick="download()">Download Edited HTML</button>
    <input type="file" id="upload" />
  </div>
  <iframe id="editor" sandbox="allow-same-origin allow-scripts" srcdoc="<p>Upload a file or paste HTML to start editing.</p>"></iframe>

  <script>
    const editor = document.getElementById('editor');

    function makeEditable() {
      editor.contentDocument.body.contentEditable = true;
      editor.contentDocument.designMode = 'on';
      alert("Editing enabled. Click inside the page to edit.");
    }

    function download() {
      const html = editor.contentDocument.documentElement.outerHTML;
      const blob = new Blob([html], { type: 'text/html' });
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'edited_page.html';
      a.click();
    }

    document.getElementById('upload').addEventListener('change', (e) => {
      const file = e.target.files[0];
      if (file && file.type === 'text/html') {
        const reader = new FileReader();
        reader.onload = function(evt) {
          editor.srcdoc = evt.target.result;
        };
        reader.readAsText(file);
      }
    });
  </script>
</body>
</html>
